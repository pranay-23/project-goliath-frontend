<div [class.dark]="isDarkMode()">
    <!-- The background is now dark:bg-black as requested -->
    <div class="bg-gray-50 text-gray-800 dark:bg-black dark:text-gray-200 min-h-screen font-sans transition-colors duration-300">
        <app-topbar [isDarkMode]="isDarkMode()" (themeToggled)="toggleTheme()"></app-topbar>
        <div class="pt-16 sm:pt-16">
            <router-outlet></router-outlet>
        </div>
    </div>
</div>

<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<!-- Server Startup Modal -->
@if (serverStartupService.showStartupModal()) {
  <div class="fixed inset-0 bg-black/70 dark:bg-black/90 backdrop-blur-sm flex items-center justify-center z-[9999] p-4">
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 max-w-md w-full p-6">
      <div class="text-center">
        <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 dark:border-indigo-400 mx-auto mb-4"></div>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Server Starting Up</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-4">
          The server is waking up from sleep mode. This may take a few moments. Please wait...
        </p>
        <div class="flex items-center justify-center space-x-2 text-sm text-gray-500 dark:text-gray-400">
          <svg class="animate-pulse w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
          </svg>
          <span>This is normal for free hosting services</span>
        </div>
      </div>
    </div>
  </div>
}